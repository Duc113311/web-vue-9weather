<template>
  <div class="w-full h-full">
    <!--  -->
    <BaseComponent :height="heightAuto" :isShowPad="false">
      <template v-slot:header>
        <div class="flex items-center text-left gap-2">
          <IcAirStation class="icon-svg"></IcAirStation>

          <div class="txt_medium_14">
            <!--  -->
            Tide station near by
          </div>
        </div>
      </template>
      <div class="w-full h-[300px] pad-big">
        <!--  -->
        <div class="flex w-full h-full">
          <div class="w-[50%] h-full">
            <div class="flex flex-col gap-5 pt-3">
              <div
                class="flex w-full justify-between gap-2 items-center pr-4 hover-station cursor-pointer"
                v-for="(item, index) in listStationParam"
                :key="index"
                @click="onClickChooseStationNear(item)"
              >
                <div class="flex items-center gap-2">
                  <svg
                    width="24"
                    height="25"
                    viewBox="0 0 24 25"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M5.46601 2.77918C5.53969 2.71051 5.5988 2.62771 5.63979 2.53572C5.68078 2.44372 5.70282 2.3444 5.7046 2.2437C5.70638 2.143 5.68785 2.04297 5.65013 1.94958C5.61241 1.85619 5.55626 1.77136 5.48505 1.70014C5.41383 1.62892 5.32899 1.57278 5.23561 1.53505C5.14222 1.49733 5.04219 1.47881 4.94148 1.48059C4.84078 1.48236 4.74147 1.5044 4.64947 1.5454C4.55747 1.58639 4.47467 1.64549 4.40601 1.71918C3.40444 2.71648 2.60999 3.90199 2.06835 5.20751C1.52672 6.51303 1.2486 7.91276 1.25001 9.32618C1.24833 10.7562 1.5328 12.1722 2.08666 13.4906C2.64051 14.809 3.45257 16.0033 4.47501 17.0032C4.61768 17.1391 4.80811 17.2134 5.00514 17.2101C5.20217 17.2067 5.38996 17.1259 5.52791 16.9852C5.66587 16.8445 5.7429 16.6552 5.74235 16.4581C5.74181 16.2611 5.66374 16.0721 5.52501 15.9322C4.64514 15.0721 3.94633 14.0446 3.46974 12.9102C2.99315 11.7759 2.74843 10.5576 2.75001 9.32718C2.74843 8.11068 2.9876 6.9059 3.45374 5.78226C3.91988 4.65861 4.60377 3.63732 5.46601 2.77918ZM19.677 1.80218C19.6084 1.73022 19.5263 1.6726 19.4352 1.63268C19.3442 1.59276 19.2462 1.57133 19.1468 1.56964C19.0474 1.56794 18.9487 1.58602 18.8564 1.62281C18.764 1.65961 18.6799 1.71439 18.609 1.78397C18.538 1.85356 18.4815 1.93655 18.4429 2.02813C18.4043 2.11972 18.3843 2.21807 18.384 2.31746C18.3837 2.41685 18.4032 2.51531 18.4413 2.6071C18.4794 2.6989 18.5354 2.7822 18.606 2.85218C20.3035 4.57949 21.2533 6.90536 21.25 9.32718C21.2516 10.5406 21.0136 11.7424 20.5498 12.8636C20.0859 13.9848 19.4053 15.0035 18.547 15.8612C18.4774 15.9309 18.4222 16.0137 18.3846 16.1047C18.347 16.1958 18.3277 16.2934 18.3278 16.3919C18.3279 16.4904 18.3474 16.5879 18.3851 16.6789C18.4229 16.7699 18.4783 16.8526 18.548 16.9222C18.6177 16.9918 18.7005 17.047 18.7916 17.0846C18.8826 17.1222 18.9802 17.1415 19.0787 17.1414C19.1772 17.1413 19.2748 17.1218 19.3658 17.084C19.4568 17.0462 19.5394 16.9909 19.609 16.9212C20.6063 15.9242 21.3971 14.7402 21.9361 13.4371C22.4751 12.134 22.7517 10.7374 22.75 9.32718C22.75 6.39718 21.577 3.74018 19.677 1.80218Z"
                      fill="#B6B6B6"
                    />
                    <path
                      d="M8.274 5.87519C8.34706 5.80823 8.40612 5.72746 8.44778 5.63755C8.48944 5.54763 8.51287 5.45035 8.51671 5.35133C8.52055 5.2523 8.50472 5.1535 8.47015 5.06063C8.43558 4.96775 8.38295 4.88265 8.31529 4.81024C8.24764 4.73783 8.16631 4.67955 8.07599 4.63875C7.98568 4.59796 7.88818 4.57547 7.78912 4.57258C7.69007 4.5697 7.59142 4.58647 7.49888 4.62193C7.40635 4.65739 7.32176 4.71084 7.25 4.77919C6.021 5.92819 5.25 7.52919 5.25 9.30919C5.25 11.1092 6.04 12.7272 7.292 13.8792C7.43853 14.0139 7.63258 14.0849 7.83147 14.0766C8.03035 14.0682 8.21777 13.9812 8.3525 13.8347C8.48723 13.6882 8.55823 13.4941 8.54989 13.2952C8.54154 13.0963 8.45453 12.9089 8.308 12.7742C7.338 11.8842 6.75 10.6562 6.75 9.30819C6.75 7.97619 7.325 6.76319 8.274 5.87519ZM16.803 4.82919C16.6593 4.69167 16.4668 4.61689 16.2679 4.6213C16.069 4.62571 15.88 4.70894 15.7425 4.85269C15.605 4.99644 15.5302 5.18892 15.5346 5.38781C15.539 5.58669 15.6223 5.77567 15.766 5.91319C16.691 6.79819 17.25 7.99619 17.25 9.30919C17.25 10.6382 16.678 11.8492 15.733 12.7372C15.5919 12.8743 15.5103 13.0613 15.5058 13.258C15.5013 13.4547 15.5743 13.6453 15.709 13.7887C15.8437 13.9321 16.0294 14.0168 16.226 14.0246C16.4226 14.0323 16.6144 13.9625 16.76 13.8302C17.983 12.6822 18.75 11.0842 18.75 9.31019C18.75 7.55619 18 5.97319 16.803 4.82919Z"
                      fill="#B6B6B6"
                    />
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M10.8333 10.8729C10.4897 10.6258 10.2333 10.2762 10.101 9.87416C9.96876 9.47215 9.96741 9.03855 10.0972 8.63573C10.227 8.23291 10.4812 7.88164 10.8232 7.63245C11.1653 7.38327 11.5776 7.24902 12.0008 7.24902C12.424 7.24902 12.8363 7.38327 13.1784 7.63245C13.5205 7.88164 13.7747 8.23291 13.9045 8.63573C14.0343 9.03855 14.0329 9.47215 13.9006 9.87416C13.7683 10.2762 13.5119 10.6258 13.1683 10.8729L16.7153 22.0219C16.7678 22.1871 16.7615 22.3654 16.6974 22.5265C16.6333 22.6875 16.5153 22.8214 16.3636 22.9053C16.2119 22.9893 16.0359 23.018 15.8653 22.9868C15.6948 22.9555 15.5404 22.8662 15.4283 22.7339L12.0003 18.6829L8.57333 22.7329C8.46145 22.8655 8.30704 22.9553 8.1364 22.9869C7.96577 23.0184 7.78947 22.9898 7.63754 22.906C7.48562 22.8221 7.36748 22.6882 7.30326 22.5269C7.23903 22.3657 7.2327 22.1872 7.28533 22.0219L10.8333 10.8729ZM12.9833 17.5219L14.1473 18.8969L13.5103 16.8969L12.9833 17.5219ZM12.9753 15.2139L12.9283 15.2639L12.0003 16.3619L11.0723 15.2659L11.0263 15.2149L12.0003 12.1519L12.9753 15.2139ZM10.4903 16.8979L11.0173 17.5219L9.85333 18.8969L10.4903 16.8979Z"
                      fill="#B6B6B6"
                    />
                  </svg>
                  <div
                    class="text-station"
                    :class="{
                      'active-station': currentStationNearParam.id === item.id,
                    }"
                  >
                    <p class="txt_medium_14 text-left">{{ item.name }}</p>
                    <p class="txt_regular_10 text-left">{{ item.country }}</p>
                  </div>
                </div>
                <div class="flex items-center">
                  <p class="txt_regular_14">
                    {{ convertDistanceTide(item.distance) }}
                    {{ unitSetting.activeDistance_save }}
                  </p>
                  <svg
                    width="24"
                    height="25"
                    viewBox="0 0 24 25"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M6.72727 21.0529C6.72026 21.0597 6.71083 21.0636 6.70102 21.0636C6.6912 21.0636 6.68178 21.0597 6.67477 21.0529C6.29977 20.6366 2.29102 16.0916 2.29102 13.0804C2.29102 9.35285 4.72852 8.49035 6.70102 8.49035C8.51602 8.49035 10.8485 9.46535 10.8485 13.0804C10.8485 16.1891 7.07602 20.6441 6.72727 21.0529ZM6.56977 14.0479C7.55352 14.0479 8.35102 13.2504 8.35102 12.2666C8.35102 11.2828 7.55352 10.4854 6.56977 10.4854C5.58601 10.4854 4.78852 11.2828 4.78852 12.2666C4.78852 13.2504 5.58601 14.0479 6.56977 14.0479Z"
                      fill="#00CFFF"
                    />
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M18.5923 13.5379C18.5846 13.545 18.5746 13.5489 18.5641 13.5489C18.5537 13.5489 18.5437 13.545 18.536 13.5379C18.2098 13.1629 15.0898 9.6191 15.0898 7.26035C15.0898 4.32035 17.0098 3.6416 18.566 3.6416C19.9948 3.6416 21.8323 4.3916 21.8323 7.26035C21.8323 9.6941 18.8998 13.1779 18.5923 13.5379ZM18.461 8.40035C19.2377 8.40035 19.8673 7.77075 19.8673 6.9941C19.8673 6.21745 19.2377 5.58785 18.461 5.58785C17.6844 5.58785 17.0548 6.21745 17.0548 6.9941C17.0548 7.77075 17.6844 8.40035 18.461 8.40035Z"
                      fill="#E91E63"
                    />
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M2.77152 13.0799C2.77152 11.3295 3.33771 10.3344 4.05584 9.76257C4.79431 9.17454 5.77342 8.96988 6.70152 8.96988C7.53248 8.96988 8.44537 9.19414 9.14317 9.7934C9.8266 10.3803 10.369 11.383 10.369 13.0799C10.369 13.7677 10.1583 14.5622 9.8111 15.3949C9.46595 16.2226 8.99845 17.0586 8.51401 17.8213C7.82183 18.911 7.1069 19.8327 6.69337 20.3425C6.25523 19.8274 5.48582 18.8822 4.74146 17.772C4.22589 17.003 3.72885 16.1644 3.36215 15.342C2.99261 14.5131 2.77152 13.7359 2.77152 13.0799ZM6.33927 21.3952C6.40339 21.458 6.48213 21.5025 6.56737 21.5254L6.56241 21.5418C7.06291 21.6933 7.57337 21.8098 8.09007 21.8904L8.23798 20.9419C8.00691 20.9058 7.77721 20.8619 7.54927 20.8103C7.98803 20.2622 8.66536 19.3735 9.32435 18.336C9.82662 17.5452 10.324 16.6591 10.6971 15.7643C11.0682 14.8746 11.329 13.9464 11.329 13.0799C11.329 11.1617 10.7052 9.86944 9.76862 9.06511C8.84642 8.27313 7.68556 8.00988 6.70152 8.00988C5.65713 8.00988 4.43123 8.23648 3.45784 9.01157C2.46408 9.80287 1.81152 11.1028 1.81152 13.0799C1.81152 13.9295 2.09153 14.8496 2.48535 15.7329C2.88201 16.6225 3.41059 17.5108 3.94409 18.3066C5.01107 19.898 6.12374 21.1573 6.31865 21.3737L6.32863 21.3847L6.33927 21.3952ZM16.7728 14.5506C16.1486 14.795 15.5716 15.1459 15.0675 15.5878C14.5497 16.0532 14.4397 16.6671 14.2798 17.5596L14.2797 17.5599L14.2796 17.5608C14.2632 17.6523 14.2462 17.7468 14.2283 17.8444C14.042 18.8567 13.7449 20.0433 12.5345 21.1056C11.6214 21.9073 10.3129 22.0508 9.23465 22.0044L9.2759 21.0453C10.2901 21.0889 11.2767 20.9324 11.9012 20.3841C12.8657 19.5377 13.1104 18.6149 13.2841 17.6707C13.3019 17.5742 13.3189 17.4755 13.3362 17.3751C13.4816 16.5321 13.6471 15.5717 14.4286 14.8712L14.4306 14.8695L14.4325 14.8678C15.0207 14.3518 15.6941 13.942 16.4228 13.6567L16.7728 14.5506Z"
                      fill="#00CFFF"
                    />
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M16.292 11.4093C16.7905 12.1549 17.303 12.8101 17.6715 13.2589C17.4308 13.3192 17.1925 13.3893 16.9573 13.4691L17.2657 14.3782C17.7131 14.2264 18.1729 14.1138 18.6398 14.0418L18.6369 14.0234C18.7423 14.0087 18.8413 13.9619 18.92 13.8885L18.94 13.8699L18.9578 13.8491C19.1177 13.6619 19.9445 12.681 20.7338 11.4328C21.1285 10.8087 21.5195 10.1087 21.8131 9.40074C22.1047 8.69764 22.3128 7.95711 22.3128 7.25988C22.3128 5.71595 21.8134 4.66558 21.0476 4.01008C20.2964 3.36707 19.3553 3.16113 18.5665 3.16113C17.7304 3.16113 16.7379 3.34171 15.9458 3.97253C15.1333 4.61956 14.6103 5.67675 14.6103 7.25988C14.6103 7.94592 14.8344 8.6808 15.1442 9.37801C15.4568 10.0814 15.8727 10.7821 16.292 11.4093ZM16.5438 4.72349C16.0072 5.15083 15.5703 5.90301 15.5703 7.25988C15.5703 7.75322 15.7361 8.34584 16.0215 8.98821C16.3042 9.62436 16.6886 10.2753 17.0901 10.8758C17.6363 11.6927 18.2018 12.3985 18.5583 12.8245C18.8926 12.407 19.4164 11.7199 19.9224 10.9198C20.2993 10.3238 20.6605 9.67395 20.9264 9.03297C21.1942 8.38713 21.3528 7.77953 21.3528 7.25988C21.3528 5.93506 20.9334 5.17606 20.4233 4.73938C19.8985 4.29019 19.2065 4.12113 18.5665 4.12113C17.8463 4.12113 17.1008 4.27993 16.5438 4.72349Z"
                      fill="#E91E63"
                    />
                  </svg>
                </div>
              </div>
            </div>
          </div>
          <div class="w-[50%] h-full bg-slate-400"></div>
        </div>
      </div>
    </BaseComponent>
  </div>
</template>
<script>
import BaseComponent from "@/components/common/baseComponent.vue";
import IcAirStation from "@/components/icons/IcAirStation.vue";
import { mapActions, mapGetters, mapMutations } from "vuex";

export default {
  name: "station-tide",

  components: { BaseComponent, IcAirStation },

  data() {
    return {
      heightAuto: "auto",
    };
  },

  computed: {
    ...mapGetters("tideModule", [
      "listStationNearByGetters",
      "currentStationNearGetters",
    ]),

    listStationParam() {
      return this.listStationNearByGetters;
    },

    currentStationNearParam() {
      return this.currentStationNearGetters;
    },

    unitSetting() {
      const unitSetting = this.$store.state.commonModule.objectSettingSave;
      return unitSetting;
    },
  },

  methods: {
    ...mapMutations("tideModule", ["setCurrentStationNear"]),
    ...mapActions("tideModule", ["getTidesData"]),
    convertDistanceTide(value) {
      const unitSetting = this.$store.state.commonModule.objectSettingSave;
      const isMiles = unitSetting.activeDistance_save;
      if (isMiles === "mi") {
        return (value / 1609.34).toFixed(1); // Đổi sang mile
      } else {
        return value.toFixed(1); // Đổi sang km
      }
    },

    async onClickChooseStationNear(value) {
      this.setCurrentStationNear(value);
      const currentTimestamp = Math.floor(Date.now() / 1000);

      const params = {
        keyPrivate: "AMOBI_SOFT",
        duration: 44640,
        interval: 1440,
        timestamp: currentTimestamp,
        station_id: value.id,
        datum: "MLLW",
      };

      await this.getTidesData(params);
    },
  },
};
</script>
<style lang="scss">
.hover-station:hover {
  .text-station {
    color: rgb(175, 170, 203);
  }
}

.active-station {
  color: rgb(138, 121, 231);
}
</style>
